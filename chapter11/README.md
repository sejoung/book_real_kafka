# 카프카 커넥트

카프카 커넥트는 아파키 카프카의 오픈소스 프로젝트 중하나로 데이터베이스 같은 외부 시스템과 카프카를 손쉽게 연결하기 위한 프레임워크이다.

커넥트의 장점

* 데이터 중심 파이프라인 : 커넥트를 이용해 카프카로 데이터를 보내거나, 카프카로부터 데이터를 가지고 온다.
* 유연성과 확장성 : 커넥트는 테스트 및 일회성 작업을 위한 단독 모드로 실행 할 수 있고 대규모 운영환경을 위한 분산모드로 실행할수 있다.
* 재사용성과 기능 확장 : 커넥트는 이미 만들어진 기존 커넥터들을 활용할 수도 있고 운영환경에서의 요구사항에 맞춰 빠르게 확장 가능
* 장애 및 복구 : 카프카 커넥트를 분산 모드로 실행하면 워커 노드의 장애 상황에도 유연하게 대응이 가능하므로 고가용성이 보장된다.

## 카프카 커넥트의 핵심 개념

* 소스 커넥트 : 들어오는 방향의 커넥트(프로듀서 역활)
* 싱크 커넥트 : 나가는 방향의 커넥트(컨슈머 역활)

워커(인스턴스)는 커넥트 프로세스가 실행되는 서버 또는 인스턴스 등을 의미하며, 커넥터나 태스크들이 워커에서 실행된다.
분산모드는 특정 워커에 장애가 발생하더라도 해당 워커에 동작중인 커넥터나 태스크들이 다른 워커로 이동해 연속해서 동작할수 있다는 장점이 있고 단독 모드는 그렇지 않다.

커넥터는 직접 데이터를 복사하지 않고 데이터를 어디에서 어디로 복사해야 하는지의 작업을 정의하고 관리하는 역활을 한다.

태스크는 커넥터가 정의한 작업을 직접 수행하는 역활을 한다.

## 카프카 커넥트의 내부 동작

분산 배치된 태스크들은 메시지들을 소스에서 카프카로 혹은 카프카에서 싱크로 이동시킨다.
이때 커넥트는 파티셔닝 개념을 적용해 테이터들을 하위 집합으로 나눈다. 단 토픽의 파티션과 컨넥터의 파티션은 용어만 같을뿐 아무 관계가 없다.
여기에서 나눈 파티션들에는 오프셋과 같이 순차적으로 레코드들이 정렬된다.

각 파티션에는 오프셋도 함께 포함되어 있어서 커넥트의 장애나 실패가 발생할 경우 지정된 위치부터 데이터를 이동할수 있다.


# 참고

------

* [kafka connect](https://kafka.apache.org/documentation/#connect)
