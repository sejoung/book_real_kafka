# 카프카 리플리케이션
## 리플리케이션 동작 개요

replication-factor 옵션으로 관리자기 지정한 수만큼의 리플리케이션을 가질수 있기때문에 브로커 장애가 발생해도 메시지 손실 없이 안정적으로 메시지를 주고받을 수 있다.

## 리더와 팔로워

모두 동일한 리플리케이션이라 하더라도 리더만의 역할이 따로 있기 때문에 특별히 카프카에선 리더를 특별히 강조해 표시한다.

리더는 리플리케이션 중 하나가 선정되며 모든 읽기와 쓰기는 그 리더를 통해서만 가능합니다. 다시 말해 프로듀서는 모든 리플리케이션에 메시지를 보내는 것이 아니라 리더에게만 메시지를 전송한다.

리더는 읽고 쓰는 동작은 물론 팔로워가 리플리케이션 동작을 잘 수행하고 있는지도 판단함.

모든 팔로워의 복제가 완료되면 리더는 내부적으로 커밋되었다는 표시를 하게된다. 마지막 커밋 오프셋 위치는 하이퍼워터마크라고 부른다.
컨슈머는 커밋된 메시지만 읽을수 있다.

